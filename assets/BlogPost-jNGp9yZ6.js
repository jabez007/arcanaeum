import{d as R,r as B,B as _,A as S,o as H,k as m,w as u,c as r,b as t,q as c,f as p,h as d,g as q,O as l,F as $,L as w,u as b,T as A,p as O,l as U,i as a,_ as j}from"./index-CJBnA0Xv.js";import{u as z}from"./use-blog-Cg2fLRo5.js";const G={class:"post-header"},J={class:"breadcrumb"},K={class:"post-meta"},Q={key:0,class:"author"},W={class:"blog-badge blog-badge-reading-time"},X={key:0,class:"post-tags"},Y=["innerHTML"],Z={key:0,class:"related-posts"},tt={class:"related-grid"},ot=["onClick"],et={class:"related-meta"},st={class:"blog-badge blog-badge-reading-time"},at={class:"post-footer"},lt={class:"post-navigation"},nt={class:"nav-title"},rt={class:"nav-title"},ut={class:"blog-error",key:"error"},it={class:"not-found",key:"not-found"},dt={class:"blog-loading",key:"loading"},vt=R({__name:"BlogPost",props:{slug:{}},setup(D){const k=D,N=U(),{posts:V,postLoading:v,error:P,getPost:E,getRelatedPostsForPost:F,loadPosts:I}=z();v.value=!0;const s=B(void 0),f=B([]),g=_(()=>V.value),T=_(()=>s.value?g.value.findIndex(e=>{var o;return e.slug===((o=s.value)==null?void 0:o.slug)}):-1),h=_(()=>{const e=T.value;return e>0?g.value[e-1]:void 0}),y=_(()=>{const e=T.value;return e>=0&&e<g.value.length-1?g.value[e+1]:void 0}),C=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),M=e=>{N.push(`/blog/${e}`)},x=B(null),L=async()=>{v.value=!0,s.value=void 0,f.value=[];try{g.value.length===0&&I(!0);const e=await E(k.slug);e?(s.value=e,f.value=F(e),await O(),x.value&&x.value.scrollTo({top:0,behavior:"smooth"}),e.frontmatter.title&&(document.title=`${e.frontmatter.title} - Blog`)):s.value=void 0}catch(e){console.error(`Error in loadPostData for ${k.slug}:`,e)}finally{v.value=!1}};return S(()=>k.slug,L),H(()=>{L()}),(e,o)=>{const i=q("router-link");return a(),m(A,{name:"fade-slide",mode:"out-in"},{default:u(()=>[s.value?(a(),r("article",{class:"blog-post",key:s.value.slug,ref_key:"postContainer",ref:x},[t("header",G,[t("nav",J,[p(i,{to:"/blog"},{default:u(()=>o[0]||(o[0]=[d("← Back to Blog")])),_:1,__:[0]})]),t("div",K,[t("time",null,l(C(s.value.frontmatter.date)),1),s.value.frontmatter.author?(a(),r("span",Q,[o[1]||(o[1]=d(" by ")),p(i,{to:`/blog/author/${s.value.frontmatter.author}`,class:"author-link"},{default:u(()=>[d(l(s.value.frontmatter.author),1)]),_:1},8,["to"])])):c("",!0),t("span",W,l(s.value.readingTime)+" min read",1)]),t("h1",null,l(s.value.frontmatter.title),1),s.value.frontmatter.tags?(a(),r("div",X,[(a(!0),r($,null,w(s.value.frontmatter.tags,n=>(a(),m(i,{key:n,to:`/blog/tag/${n}`,class:"blog-tag tag-link"},{default:u(()=>[d(l(n),1)]),_:2},1032,["to"]))),128))])):c("",!0)]),t("div",{class:"post-content",innerHTML:s.value.content},null,8,Y),f.value.length>0?(a(),r("section",Z,[o[2]||(o[2]=t("h3",null,"Related Posts",-1)),t("div",tt,[(a(!0),r($,null,w(f.value,n=>(a(),r("div",{key:n.slug,class:"blog-card related-card",onClick:gt=>M(n.slug)},[t("h4",null,l(n.frontmatter.title),1),t("p",null,l(n.frontmatter.excerpt),1),t("div",et,[t("time",null,l(C(n.frontmatter.date)),1),t("span",st,l(n.readingTime)+" min read",1)])],8,ot))),128))])])):c("",!0),t("footer",at,[t("div",lt,[h.value?(a(),m(i,{key:0,to:`/blog/${h.value.slug}`,class:"nav-link prev"},{default:u(()=>[o[3]||(o[3]=t("span",{class:"nav-label"},"Previous",-1)),t("span",nt,l(h.value.frontmatter.title),1)]),_:1,__:[3]},8,["to"])):c("",!0),y.value?(a(),m(i,{key:1,to:`/blog/${y.value.slug}`,class:"nav-link next"},{default:u(()=>[o[4]||(o[4]=t("span",{class:"nav-label"},"Next",-1)),t("span",rt,l(y.value.frontmatter.title),1)]),_:1,__:[4]},8,["to"])):c("",!0)])])])):!b(v)&&b(P)?(a(),r("div",ut,[o[6]||(o[6]=t("h1",null,"Error Loading Post",-1)),t("p",null,l(b(P)),1),p(i,{to:"/blog",class:"blog-btn blog-btn-primary"},{default:u(()=>o[5]||(o[5]=[d("← Back to Blog")])),_:1,__:[5]})])):b(v)?(a(),r("div",dt,"Loading post...")):(a(),r("div",it,[o[8]||(o[8]=t("h1",null,"Post not found",-1)),o[9]||(o[9]=t("p",null,"The post you're looking for doesn't exist or has been moved.",-1)),p(i,{to:"/blog",class:"blog-btn blog-btn-primary"},{default:u(()=>o[7]||(o[7]=[d("← Back to Blog")])),_:1,__:[7]})]))]),_:1})}}}),_t=j(vt,[["__scopeId","data-v-babb471b"]]);export{_t as default};
