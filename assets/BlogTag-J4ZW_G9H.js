import{d as Z,r as C,B as _,A as M,o as q,c as n,b as e,q as d,f as B,w as h,h as m,g as z,O as r,x as G,P as I,t as $,u as c,F as P,L as D,l as j,i as l,s as S,k as H,_ as J}from"./index-CJBnA0Xv.js";import{u as K}from"./use-blog-Cg2fLRo5.js";const Q={class:"tag-page"},W={class:"tag-header"},X={class:"breadcrumb"},Y={class:"tag-info"},tt={key:0},et={key:0,class:"tag-controls"},st={class:"sort-container"},ot={class:"view-toggle"},at={key:1,class:"blog-loading"},lt={key:2,class:"blog-error"},nt=["onClick"],rt={class:"post-meta"},it={key:0,class:"blog-badge blog-badge-featured"},dt={class:"blog-badge blog-badge-reading-time"},gt={class:"excerpt"},ut={class:"post-footer"},ct={class:"post-tags"},vt=["onClick"],mt={key:0,class:"tag-more"},bt={key:0,class:"post-author"},ft=["onClick"],pt={key:4,class:"empty-state"},_t={class:"empty-actions"},ht={key:5,class:"blog-pagination"},kt=["disabled"],yt={class:"blog-page-info"},wt=["disabled"],Ct={key:6,class:"related-tags"},Bt={class:"related-tags-grid"},T=12,$t=Z({__name:"BlogTag",props:{tag:{}},setup(A){const b=A,k=j(),{posts:F,postsLoading:y,error:f,loadPosts:V}=K(),p=C("date-desc"),v=C("grid"),u=C(1),g=_(()=>F.value.filter(t=>{var a;return(a=t.frontmatter.tags)==null?void 0:a.includes(b.tag)}).sort((t,a)=>{switch(p.value){case"date-asc":return new Date(t.frontmatter.date).getTime()-new Date(a.frontmatter.date).getTime();case"date-desc":return new Date(a.frontmatter.date).getTime()-new Date(t.frontmatter.date).getTime();case"title-asc":return t.frontmatter.title.localeCompare(a.frontmatter.title);case"title-desc":return a.frontmatter.title.localeCompare(t.frontmatter.title);default:return 0}})),w=_(()=>Math.ceil(g.value.length/T)),x=_(()=>{const o=(u.value-1)*T,t=o+T;return g.value.slice(o,t)}),N=_(()=>{const o=new Map;return g.value.forEach(t=>{var a;(a=t.frontmatter.tags)==null||a.forEach(s=>{s!==b.tag&&o.set(s,(o.get(s)||0)+1)})}),Array.from(o.entries()).map(([t,a])=>({tag:t,count:a})).sort((t,a)=>a.count-t.count).slice(0,8)}),E=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),R=o=>{k.push(`/blog/${o}`)},O=o=>{k.push(`/blog/tag/${o}`)},U=o=>{o&&k.push(`/blog/author/${o}`)};return M(p,()=>{u.value=1}),M(()=>b.tag,()=>{u.value=1}),q(()=>{document.title=`#${b.tag} - Blog`,V()}),(o,t)=>{const a=z("router-link");return l(),n("div",Q,[e("header",W,[e("nav",X,[B(a,{to:"/blog"},{default:h(()=>t[5]||(t[5]=[m("← Back to Blog")])),_:1,__:[5]})]),e("div",Y,[e("h1",null,[t[6]||(t[6]=e("span",{class:"tag-symbol"},"#",-1)),m(r(o.tag),1)]),g.value.length>0?(l(),n("p",tt,r(g.value.length)+" post"+r(g.value.length!==1?"s":"")+' tagged with "'+r(o.tag)+'" ',1)):d("",!0)])]),g.value.length>0?(l(),n("div",et,[e("div",st,[t[8]||(t[8]=e("label",{for:"sort-select"},"Sort by:",-1)),G(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),id:"sort-select",class:"blog-input sort-select"},t[7]||(t[7]=[e("option",{value:"date-desc"},"Newest First",-1),e("option",{value:"date-asc"},"Oldest First",-1),e("option",{value:"title-asc"},"Title A-Z",-1),e("option",{value:"title-desc"},"Title Z-A",-1)]),512),[[I,p.value]])]),e("div",ot,[e("button",{onClick:t[1]||(t[1]=s=>v.value="grid"),class:$([{active:v.value==="grid"},"blog-btn blog-btn-secondary view-btn"])}," Grid ",2),e("button",{onClick:t[2]||(t[2]=s=>v.value="list"),class:$([{active:v.value==="list"},"blog-btn blog-btn-secondary view-btn"])}," List ",2)])])):d("",!0),c(y)?(l(),n("div",at,"Loading posts...")):d("",!0),c(f)?(l(),n("div",lt,r(c(f)),1)):d("",!0),!c(y)&&!c(f)&&g.value.length>0?(l(),n("div",{key:3,class:$(["posts-container",`posts-${v.value}`])},[(l(!0),n(P,null,D(x.value,s=>{var L;return l(),n("article",{key:s.slug,class:"blog-card post-card",onClick:i=>R(s.slug)},[e("div",rt,[e("time",null,r(E(s.frontmatter.date)),1),s.frontmatter.featured?(l(),n("span",it," Featured ")):d("",!0),e("span",dt,r(s.readingTime)+" min read",1)]),e("h2",null,r(s.frontmatter.title),1),e("p",gt,r(s.frontmatter.excerpt),1),e("div",ut,[e("div",ct,[(l(!0),n(P,null,D((L=s.frontmatter.tags)==null?void 0:L.filter(i=>i!==o.tag).slice(0,3),i=>(l(),n("span",{key:i,class:"blog-tag tag",onClick:S(Pt=>O(i),["stop"])},r(i),9,vt))),128)),s.frontmatter.tags&&s.frontmatter.tags.filter(i=>i!==o.tag).length>3?(l(),n("span",mt," +"+r(s.frontmatter.tags.filter(i=>i!==o.tag).length-3),1)):d("",!0)]),s.frontmatter.author?(l(),n("div",bt,[e("span",{onClick:S(i=>U(s.frontmatter.author),["stop"])}," by "+r(s.frontmatter.author),9,ft)])):d("",!0)]),t[9]||(t[9]=e("div",{class:"read-more"},"Read more →",-1))],8,nt)}),128))],2)):d("",!0),!c(y)&&!c(f)&&g.value.length===0?(l(),n("div",pt,[e("h3",null,'No posts found for "'+r(o.tag)+'"',1),t[12]||(t[12]=e("p",null,"This tag doesn't exist or no posts have been tagged with it yet.",-1)),e("div",_t,[B(a,{to:"/blog",class:"blog-btn blog-btn-primary"},{default:h(()=>t[10]||(t[10]=[m("← Back to Blog")])),_:1,__:[10]}),B(a,{to:"/blog/search",class:"blog-btn blog-btn-secondary"},{default:h(()=>t[11]||(t[11]=[m("Search Posts")])),_:1,__:[11]})])])):d("",!0),w.value>1?(l(),n("div",ht,[e("button",{onClick:t[3]||(t[3]=s=>u.value--),disabled:u.value===1,class:"blog-page-btn"}," Previous ",8,kt),e("span",yt," Page "+r(u.value)+" of "+r(w.value),1),e("button",{onClick:t[4]||(t[4]=s=>u.value++),disabled:u.value===w.value,class:"blog-page-btn"}," Next ",8,wt)])):d("",!0),N.value.length>0?(l(),n("section",Ct,[t[13]||(t[13]=e("h3",null,"Related Tags",-1)),e("div",Bt,[(l(!0),n(P,null,D(N.value,s=>(l(),H(a,{key:s.tag,to:`/blog/tag/${s.tag}`,class:"blog-tag tag-link related-tag"},{default:h(()=>[m(r(s.tag)+" ("+r(s.count)+") ",1)]),_:2},1032,["to"]))),128))])])):d("",!0)])}}}),Nt=J($t,[["__scopeId","data-v-8825d650"]]);export{Nt as default};
